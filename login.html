
<!doctype html>
<html lang="ar" dir="rtl" data-theme="auto">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>تسجيل الدخول | تدريبي</title>
<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box}
:root{--brand:#0a66b2;--brand-600:#0a5aa0;--brand-700:#084a85;--bg:#f6f9fc;--card:#ffffff;--line:#e7eef6;--text:#0c1b2a;--muted:#5f6f80;--shadow:0 20px 60px rgba(10,102,178,.18)}
@media(prefers-color-scheme:dark){:root{--bg:#0c1520;--card:#111c29;--line:#152235;--text:#e8eef6;--muted:#a8b6c5;--shadow:0 20px 60px rgba(0,0,0,.5)}}
html[data-mode="dark"]{--bg:#0c1520;--card:#111c29;--line:#152235;--text:#e8eef6;--muted:#a8b6c5;--shadow:0 20px 60px rgba(0,0,0,.5)}
body{margin:0;background:var(--bg);color:var(--text);font-family:"Tajawal",system-ui,Arial;min-height:100vh;display:grid;place-items:center;overflow:hidden}
.bg{position:fixed;inset:0;pointer-events:none;background:
radial-gradient(1000px 500px at 90% -10%, rgba(10,102,178,.15), transparent 60%),
radial-gradient(800px 400px at -20% 100%, rgba(10,102,178,.10), transparent 60%)}
.shell{width:min(1100px,94%);display:grid;grid-template-columns:1fr 1fr;gap:18px;align-items:center;opacity:0;transform:translateY(16px) scale(.98);filter:blur(8px);transition:1s cubic-bezier(.2,.7,.1,1)}
.shell.ready{opacity:1;transform:none;filter:none}
.hero{padding:20px}
.logo{display:flex;align-items:center;gap:10px}
.logo img{width:64px;height:64px;object-fit:contain}
.logo .t{font-weight:900;color:var(--brand);font-size:26px}
.hero h1{margin:14px 0 6px;font-size:36px;line-height:1.25}
.hero p{margin:0;color:var(--muted);line-height:2}
.pills{display:flex;flex-wrap:wrap;gap:8px;margin-top:14px}
.pill{background:rgba(10,102,178,.08);color:var(--brand);padding:6px 10px;border-radius:999px;font-size:13px}
.formCard{position:relative;background:var(--card);border:1px solid var(--line);border-radius:22px;box-shadow:var(--shadow);padding:18px;transform:scale(.92);opacity:0;animation:pop .7s .3s forwards cubic-bezier(.2,.7,.1,1)}
@keyframes pop{to{opacity:1;transform:scale(1)}}
.tabs{display:flex;border:1px solid var(--line);border-radius:14px;overflow:hidden;margin-bottom:14px}
.tab{flex:1;text-align:center;padding:10px;cursor:pointer;font-weight:700;background:transparent}
.tab.active{background:var(--brand);color:#fff}
.group{display:flex;flex-direction:column;gap:6px;margin:10px 0}
label{font-size:14px;color:var(--muted)}
input[type="email"],input[type="password"]{width:100%;padding:14px 12px;border-radius:12px;border:1px solid var(--line);background:transparent;color:var(--text);outline:none}
input:focus{border-color:var(--brand)}
.action{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-top:8px}
.btn{display:inline-flex;align-items:center;gap:8px;background:var(--brand);color:#fff;border:0;border-radius:14px;padding:12px 18px;font-weight:800;letter-spacing:.2px;cursor:pointer}
.btn.ghost{background:transparent;color:var(--brand);border:1px solid var(--line)}
.meta{display:flex;align-items:center;gap:8px;color:var(--muted);font-size:13px;margin-top:8px}
.msg{margin:8px 0 0;padding:10px 12px;border-radius:12px;border:1px solid var(--line);background:rgba(10,102,178,.06);color:var(--brand);display:none}
.msg.show{display:block}
.toast{position:fixed;bottom:20px;inset-inline:0;display:grid;place-items:center;pointer-events:none}
.toast .t{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:10px 14px;color:var(--muted);box-shadow:var(--shadow);opacity:0;transform:translateY(10px);transition:.4s}
.toast .t.show{opacity:1;transform:none}
.mode{position:fixed;top:14px;left:14px;z-index:5}
.mode button{border:1px solid var(--line);background:var(--card);color:var(--text);padding:8px 12px;border-radius:12px;cursor:pointer}
@media(max-width:980px){.shell{grid-template-columns:1fr}.hero{order:2;text-align:center}.logo{justify-content:center}}
</style>
</head>
<body>
<div class="bg"></div>

<div class="mode"><button id="toggleMode">الوضع: تلقائي</button></div>

<div id="shell" class="shell">
  <div class="formCard">
    <div class="tabs">
      <div class="tab active" data-type="auto">تسجيل الدخول</div>
      <div class="tab" data-type="admin">مسؤول</div>
      <div class="tab" data-type="provider">جهة تدريب</div>
      <div class="tab" data-type="supervisor">مشرف</div>
      <div class="tab" data-type="trainer">متدرب</div>
    </div>
    <form method="post" id="f">
      <input type="hidden" name="csrf" value="<?=h(csrf_get())?>">
      <div class="group">
        <label>البريد الإلكتروني</label>
        <input type="email" name="email" id="email" required autocomplete="username" placeholder="example@domain.com" value="<?=h($_POST['email']??'')?>">
      </div>
      <div class="group">
        <label>كلمة المرور</label>
        <input type="password" name="password" id="password" required autocomplete="current-password" placeholder="••••••••">
      </div>
      <div class="action">
        <button class="btn" id="loginBtn" type="submit">دخول</button>
        <a class="btn ghost" href="register_user.html">إنشاء حساب للمتدرب</a>
      </div>
      <div id="ai" class="meta">مساعد تدريبي: أدخل بريدك وسنوجّهك تلقائيًا حسب نوع حسابك</div>
      <div id="serverMsg" class="msg <?=$msg?'show':''?>"><?=h($msg)?><div style="font-size:12px;color:#6a7d90;margin-top:4px"><?=h($warm)?></div></div>
    </form>
  </div>

  <div class="hero">
    <div class="logo">
      <img src="logo.png" alt="Tadrebi">
      <div class="t">تدريبي</div>
    </div>
    <h1>مرحبًا بك، تسجيل دخول واحد يوصلُك إلى دورك الصحيح</h1>
    <p>تعرّف المنصة نوع حسابك تلقائيًا بناءً على بريدك الإلكتروني: إن كنت مسؤولاً ستنتقل إلى لوحة الإدارة، وإن كنت جهة تدريب ستذهب إلى لوحة المنشأة، وإن كنت مشرفًا فإلى لوحة الإشراف، وإن كنت متدربًا فإلى لوحة المتدرب.</p>
    <div class="pills">
      <span class="pill">توجيه ذكي</span>
      <span class="pill">لغة عربية</span>
      <span class="pill">تجربة منظمة</span>
      <span class="pill">لون أزرق أساسي</span>
      <span class="pill">وضع ليلي/نهاري</span>
    </div>
  </div>
</div>

<div class="toast"><div id="toast" class="t">جاهز لمساعدتك</div></div>

<script>
document.addEventListener('DOMContentLoaded',function(){
  setTimeout(()=>document.getElementById('shell').classList.add('ready'),80);
  const tabs=[...document.querySelectorAll('.tab')], ai=document.getElementById('ai'), email=document.getElementById('email'), pwd=document.getElementById('password'), toast=document.getElementById('toast');
  let mode=localStorage.getItem('mode');
  if(mode==='dark'){document.documentElement.setAttribute('data-mode','dark');document.getElementById('toggleMode').textContent='الوضع: ليلي'}
  else if(mode==='light'){document.documentElement.setAttribute('data-mode','light');document.getElementById('toggleMode').textContent='الوضع: نهاري'}
  function say(t){toast.textContent=t;toast.classList.add('show');setTimeout(()=>toast.classList.remove('show'),1300)}
  email.addEventListener('focus',()=>ai.textContent='اكتب بريدك، وسنحدد نوع الحساب تلقائيًا');
  pwd.addEventListener('focus',()=>ai.textContent='حافظ على سرية كلمة المرور');
  email.addEventListener('input',()=>{ if(email.value.endsWith('@admin.com')) ai.textContent='يبدو أنك مسؤول' ; else if(email.value.includes('provider')) ai.textContent='يبدو أنك جهة تدريب' ; else if(email.value.includes('sup')) ai.textContent='يبدو أنك مشرف' ; else ai.textContent='قد تكون متدربًا' });
  tabs.forEach(t=>t.addEventListener('click',()=>{tabs.forEach(x=>x.classList.remove('active'));t.classList.add('active');say('تم اختيار: '+t.textContent)}));
  document.getElementById('toggleMode').addEventListener('click',function(){
    const html=document.documentElement;const cur=html.getAttribute('data-mode');
    if(cur==='dark'){html.setAttribute('data-mode','light');localStorage.setItem('mode','light');this.textContent='الوضع: نهاري';say('تم تفعيل الوضع النهاري')}
    else if(cur==='light'){html.removeAttribute('data-mode');localStorage.removeItem('mode');this.textContent='الوضع: تلقائي';say('الوضع يتبع جهازك')}
    else {html.setAttribute('data-mode','dark');localStorage.setItem('mode','dark');this.textContent='الوضع: ليلي';say('تم تفعيل الوضع الليلي')}
  });
});
</script>
</body>
</html>


